<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="LaTeX Lwarp package" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<title>W02-Exercise</title>
<link rel="stylesheet" type="text/css" href="lwarp.css" />
</head>
<body>


<div class="bodywithoutsidetoc">


<main class="bodycontainer">


<section class="textbody">

<a id="W02-Exercise-autofile-0"></a>

<a id="W02-Exercise-autopage-1"></a>
<div class="titlepage">

<h1>Zero-weighted Exercise (0%): Introduction to C</h1>


<div class="author">


<div class="oneauthor">

<p>
CS2002 - Jon Lewis <kbd><jon.lewis@st-andrews.ac.uk></kbd>
</p>
</div>

</div>


<div class="titledate">

<p>
Due date: Friday 26th January (Week 2), 21:00<br />
MMS is the definitive source for all coursework deadlines
</p>
</div>

</div>

<p>
This exercise does not count towards your module grade. However, it is very much recommended that you attempt the exercise as it gives you the opportunity to get used to the C programming language, creating makefiles, development in C, and running stacscheck over your program
developed in C.<br />
<br />
As this is a zero-weighted exercise, a report is not required.
</p>
<!--
...... section Objective ......
-->
<h4 id="autosec-3">Objective</h4>
<a id="W02-Exercise-autopage-3"></a>


<ul style="list-style-type:none">

<li>
<p>
• to introduce you to programming in C
</p>


</li>
<li>


<p>
• to introduce you to creating and using makefiles
</p>


</li>
<li>


<p>
• to introduce you to running stacscheck over your program developed in C
</p>
</li>
</ul>
<!--
...... section Learning Outcomes ......
-->
<h4 id="autosec-4">Learning Outcomes</h4>
<a id="W02-Exercise-autopage-4"></a>


<p>
By the end of this practical you should understand:
</p>

<ul style="list-style-type:none">

<li>
<p>
• writing a makefile to build your program
</p>


</li>
<li>


<p>
• writing simple functions in C
</p>


</li>
<li>


<p>
• how to run the automated checker on your solution written in C
</p>
</li>
</ul>
<!--
...... section Getting started ......
-->
<h4 id="autosec-5">Getting started</h4>
<a id="W02-Exercise-autopage-5"></a>


<p>
We would very much recommend that you work in the labs for CS2002. To start with, you should create and change to a new directory for this CS2002 exercise on the lab machines, such as by<br />
<br />
<kbd>mkdir -p /cs/home/&#x00024;USER/Documents/CS2002/W02-Exercise/src</kbd><br />
<kbd>cd /cs/home/&#x00024;USER/Documents/CS2002/W02-Exercise/src</kbd><br />
<br />
You will then have to decide which editor or IDE to use if you haven’t already. If you are using an IDE such as VS Code, you can open the <kbd>W02-Exercise</kbd> folder in VS Code. If you right-click on the <kbd>src</kbd> sub-directory in the explorer in VS Code, you can
create a new file called <kbd>recursive_fib.c</kbd> to which you will add code below. If you are using CLion or Eclipse (with CDT tools installed from market place) you can use the <kbd>W02-Exercise</kbd> directory as the base directory for your new project in that IDE. In
any case, even if you are using an IDE, I would recommend that you use it merely as an editor and that you use a terminal window (in which you created the directory above) to compile and run your program and execute stacscheck.
</p>
<!--
...... section Requirements ......
-->
<h4 id="autosec-6">Requirements</h4>
<a id="W02-Exercise-autopage-6"></a>


<p>
In this exercise, you will write a program, in three stages, to calculate a sequence of numbers called the "Weighted Fibonacci sequence". You will do this in two stages. You should submit a zip file containing:
</p>

<ul style="list-style-type:none">

<li>
<p>
• Your source code, with a Makefile, which must be in a directory called <kbd>src</kbd> within your assignment directory, for stacscheck.
</p>
</li>
</ul>
<!--
...... section A C Program to Calculate The Weighted Fibonacci Sequence ......
-->
<h4 id="autosec-7">A C Program to Calculate The Weighted Fibonacci Sequence</h4>
<a id="W02-Exercise-autopage-7"></a>


<p>
You are expected to create correct Makefile entries for each stage. These should have correct dependencies, so if one file is changed the correct objects are rebuilt. The directory below contains some examples which may be of help.
</p>
<div class="center">

<p>
<a href="https://studres.cs.st-andrews.ac.uk/CS2002/Examples/" target="_blank" >https://studres.cs.st-andrews.ac.uk/CS2002/Examples/</a>
</p>
</div>

<p>
The standard Weighted Fibonacci series begins <kbd>0, 1</kbd>. After this, each term in the Weighted Fibonacci sequence is generated by adding the previous term, plus twice the term before that. Therefore the third element is <kbd>1 + 2 * 0 = 1</kbd>, and the fourth
element is <kbd>1 + 2 * 1 = 3</kbd>.
</p>
<!--
...... subsection Stage 1: Recursive Calculation ......
-->
<h5 id="autosec-9">Stage 1: Recursive Calculation</h5>
<a id="W02-Exercise-autopage-9"></a>


<p>
1) Write a function <kbd>int fibcalc(int n)</kbd> to calculate the Weighted Fibonacci of <span
    id="lateximage-W02-Exercise-1"
    class="lateximagesource"
><!--
n
--><img
   src="W02-Exercise-images/02E7393831EA73285F9D89507F730966.svg"
   alt="\( n \)"
   role="math"
   style="width:0.75029em"
   class="lateximage"
></span> recursively. This function should return 0 for <kbd>fibcalc(0)</kbd>, 1 for <kbd>fibcalc(1)</kbd>, and calculate other values recursively.
</p>

<p>
You should put the function implementation in a source code file called <kbd>recursive_fib.c</kbd> and the function prototype in a header file called <kbd>fib.h</kbd>. You will have to include the line <kbd>#include "fib.h"</kbd> near the top of any
<kbd>.c</kbd> the files that need to use the function.
</p>

<p>
2) Write a function <kbd>void print_fib()</kbd> in a new file, <kbd>print_fib.c</kbd> and once again put the function declaration (prototype) into a file <kbd>print_fib.h</kbd>. Your <kbd>void print_fib</kbd> function should:
</p>

<ul style="list-style-type:none">

<li>
<p>
• Print the prompt, <kbd>Length?</kbd>
</p>


</li>
<li>


<p>
• Read an integer <kbd>n</kbd> from the user using <kbd>scanf</kbd> for example
</p>


</li>
<li>


<p>
• Print the first n elements of the Weighted Fibonacci sequence, using the <kbd>fibcalc</kbd> function.
</p>
</li>
</ul>

<p>
For example, with input ’7’ your program’s output should look like the following (where the ’7’ is entered by the user). Note the list consists of a space after each comma. Empty lists should be denoted as "[]".
</p>
<pre class="verbatim">
Length? 7
[0, 1, 1, 3, 5, 11, 21]

</pre>

<p>
You are not required to check whether user input is valid. In order to use <kbd>printf</kbd> and <kbd>scanf</kbd> in <kbd>print_fib.c</kbd>, you will need to include <kbd>stdio.h</kbd> and in order to use the <kbd>fibcalc</kbd> function, you will need to
include <kbd>fib.h</kbd> .
</p>

<p>
3) Write a main function in a new file <kbd>run_fib.c</kbd>. Your main function merely needs to call <kbd>print_fib</kbd>. In order to use <kbd>print_fib</kbd> in the file <kbd>run_fib.c</kbd>, you will have to include the relevant header file containing the
<kbd>print_fib</kbd> prototype in <kbd>run_fib.c</kbd>.
</p>

<p>
4) Write a <kbd>Makefile</kbd>, to build an executable called <kbd>stage1</kbd> by linking the <kbd>.o</kbd> files <kbd>run_fib.o</kbd>, <kbd>print_fib.o</kbd> and <kbd>recursive_fib.o</kbd>. The rule to build the "stage1" target should link all the
relevant <kbd>.o</kbd> files together and produce the <kbd>stage1</kbd> output. There should be lines to define the targets for each of the <kbd>.o</kbd> files mentioned above for which each rule compiles the associated <kbd>.c</kbd> file to a <kbd>.o</kbd> file. For
example, for the target <kbd>print_fib.o</kbd> you might specify <kbd>print_fib.c</kbd> and <kbd>fib.h</kbd> as dependencies and the rule (on the next line) might be <kbd>clang -Wall -Wextra -c print_fib.c</kbd>. Your <kbd>Makefile</kbd>
should also have a target <kbd>clean</kbd>, which removes any <kbd>.o</kbd> object files and the executables (<kbd>stage1</kbd> and <kbd>stage2</kbd> - see below).
</p>

<p>
5) You should test your program using stacscheck. To do this you should:
</p>

<ul style="list-style-type:none">

<li>
<p>
• Make sure that <kbd>make clean</kbd> works from inside your <kbd>src</kbd> directory and that <kbd>make stage1</kbd> works and produces an executable called <kbd>stage1</kbd>.
</p>


</li>
<li>


<p>
• From inside your <kbd>W02-Exercise</kbd>, run from a lab machine:<br />
<kbd>stacscheck /cs/studres/CS2002/Coursework/W02-Exercise/Tests</kbd>
</p>


</li>
<li>


<p>
• Assuming you are using VS Code, you can use the Terminal in VS Code to execute these commands.
</p>
</li>
</ul>

<p>
At this stage of the practical, the ’build-clean’ and ’stage1’ tests should pass. We will work on the ’stage2’ and ’invalid-input’ tests in later parts.
</p>

<p>
If nothing is working and you don’t know why, please don’t suffer in silence, ask one of the demonstrators in the lab.
</p>
<!--
...... subsection Stage 2: Iterative Calculation ......
-->
<h5 id="autosec-13">Stage 2: Iterative Calculation</h5>
<a id="W02-Exercise-autopage-13"></a>


<p>
1) In a new file <kbd>iterative_fib.c</kbd>, write a new <kbd>fibcalc</kbd> implementation that calculates the Weighted Fibonacci of a variable iteratively, rather than recursively. In particular, this function should only calculate the fib of each value at most once for a given
input and call to <kbd>fibcalc</kbd>. Give this function the same prototype as your original <kbd>fibcalc</kbd> function.
</p>

<p>
2) Add a rule to your Makefile which builds a new executable, <kbd>stage2</kbd>, using this new function, by linking the <kbd>.o</kbd> files <kbd>run_fib.o</kbd>, <kbd>print_fib.o</kbd> and <kbd>iterative_fib.o</kbd>.
</p>
<!--
...... subsection Optional Checking input ......
-->
<h5 id="autosec-14">Optional Checking input</h5>
<a id="W02-Exercise-autopage-14"></a>


<p>
Modify the files used in Stage 2 so your program doesn’t misbehave for some inputs. Discuss the things you check for, and how you check.
</p>

<p>
If your program detects an invalid input from the user, it should print <kbd>"Invalid input\n"</kbd>, then call ’exit’. If it detects an overflow, it should ideally print out regular output as normal and print out <kbd>"Overflow\n"</kbd> just prior to the overflow occurring and
then call ’exit’.
</p>

<p>
Some hints:
</p>
<ul style="list-style-type:none">

<li>
<p>
• Don’t assume long is bigger than int (you can assume int is at least 32 bits, and long long is at least 64 bits, if you wish)
</p>


</li>
<li>


<p>
• You should reject negative inputs in all places.
</p>


</li>
<li>


<p>
• It is undefined behaviour to overflow an int.
</p>


</li>
<li>


<p>
• Read the documentation of <kbd>scanf</kbd> (type <kbd>man scanf</kbd> at the command line, or consult the web) to find out how to check the return value of scanf to see if there was an error.
</p>
</li>
</ul>
<!--
...... section Deliverables ......
-->
<h4 id="autosec-15">Deliverables</h4>
<a id="W02-Exercise-autopage-15"></a>


<p>
Hand in via MMS, by the deadline of 9pm on Friday of Week 2, a zip file containing your assignment directory in which there is a <kbd>src</kbd> directory containing all source code files. As mentioned above, as this is a zero-weighted exercise, a report is not required.
</p>
<!--
...... section Marking ......
-->
<h4 id="autosec-16">Marking</h4>
<a id="W02-Exercise-autopage-16"></a>


<p>
The submission does not count towards your module grade and you will not receive a mark on MMS.<br />

</p>

<p>
I would remind you to ensure you are following the relevant guidelines on good academic practice as outlined at
</p>
<div class="center">

<p>
<a href="https://www.st-andrews.ac.uk/students/rules/academicpractice/" target="_blank" >https://www.st-andrews.ac.uk/students/rules/academicpractice/</a>
</p>
</div>

<a id="W02-Exercise-autofile-last"></a>
</section>

</main>

</div>

</body>
</html>
